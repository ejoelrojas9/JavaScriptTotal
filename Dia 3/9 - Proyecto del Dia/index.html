<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Proyecto del Día</title>
  <link rel="stylesheet" href="misEstilos.css">
</head>
<body onload="startGame()">
  
  <h1>Tu tiempo termina en</h1>
  <h1 id="hourLabel">00</h1>
  
  <div>
    <label for="first">¿Eres mayor de edad?</label><br>
    <input type="text" id="res1"><br><br>

    <label for="second">¿Cuál es tu primer nombre?</label><br>
    <input type="text" id="res2"><br><br>

    <label for="third">¿Cuál es tu primer apellido?</label><br>
    <input type="text" id="res3"><br><br>

    <label for="four">¿Eres casado?</label><br>
    <input type="text" id="res4"><br><br>

    <label for="fiveth">¿Tienes hijos?</label><br>
    <input type="text" id="res5"><br><br>

    <button onclick="endGame()">Finalizado</button>
    <button onclick="resetGame()">Reset Game</button>
    
    <audio id="audioEnd">
      <source src="gameover.mp3" type="audio/mpeg">
      Sonido no habilitado
    </audio>
  </div>

  <script>
    let endTime;
    let interTime;
    let sound = document.getElementById("audioEnd");

    function startGame() {
      endTime = setTimeout(timeOver, 29000);
      interTime = setInterval(ticTac, 1000);

      document.getElementById("hourLabel").textContent = 30;
    }

    function ticTac() {
      let timeEnd = document.getElementById("hourLabel").textContent;

      document.getElementById("hourLabel").textContent = timeEnd - 1;
    }

    function timeOver() {
      clearInterval(interTime);
      document.getElementById("hourLabel").textContent = 0;
      sound.play();
      alert("Game Over");
    }

    function endGame() {
      clearTimeout(endTime);
      clearInterval(interTime);

      let currentTime = new Date()
      let ask1 = document.getElementById("res1").value;
      let ask2 = document.getElementById("res2").value;
      let ask3 = document.getElementById("res3").value;
      let ask4 = document.getElementById("res4").value;
      let ask5 = document.getElementById("res5").value;

      let message = currentTime.toLocaleDateString('es-ES') + "\n" +
        "1." + ask1 + "\n" +
        "2." + ask2 + "\n" +
        "3." + ask3 + "\n" +
        "4." + ask4 + "\n" +
        "5." + ask5;

        alert(message);
    }

    function resetGame() {
      location.reload();
    }

  </script>
</body>
</html>